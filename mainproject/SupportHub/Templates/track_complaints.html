<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Track Your Complaints | SupportHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- Custom Pastel Green Theme --- */
        .bg-primary-green { background-color: #68d391; }
        .hover-bg-primary-green:hover { background-color: #48bb78; }
        .text-primary-green { color: #68d391; }
        .bg-header-color { background-color: #90cdf4; } /* Soft Pastel Blue for Header */
        .bg-pastel-light { background-color: #f7fafc; } /* Light background */
        .text-dark-gray { color: #2d3748; }

        /* Custom cell padding for better table aesthetics */
        .table-cell {
            padding-top: 0.75rem; /* py-3 */
            padding-bottom: 0.75rem; /* py-3 */
            padding-left: 1.5rem; /* px-6 */
            padding-right: 1.5rem; /* px-6 */
        }
    </style>
</head>
<body class="bg-pastel-light min-h-screen flex flex-col font-sans">

<header class="bg-header-color text-white py-4 px-6 flex justify-between items-center shadow-lg z-10">
    <h1 class="text-2xl font-bold">Track Your Complaints</h1>
    <a href="{% url 'dashboard' %}" class="inline-flex items-center bg-white text-dark-gray font-semibold px-4 py-2 rounded-lg hover:bg-gray-100 transition duration-200 shadow-md">
        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path></svg>
        Back to Dashboard
    </a>
</header>

<main class="p-6 md:p-10 flex-1">
    {% if complaints %}
        <div class="bg-white shadow-2xl rounded-xl overflow-hidden border border-gray-200">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50 border-b-2 border-primary-green">
                        <tr>
                            <th class="table-cell text-left text-xs font-bold text-gray-700 uppercase tracking-wider">Complaint Title</th>
                            <th class="table-cell text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden sm:table-cell">Category</th>
                            <th class="table-cell text-center text-xs font-bold text-gray-700 uppercase tracking-wider">Status</th>
                            <th class="table-cell text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden lg:table-cell">Last Updated</th>
                            <th class="table-cell"></th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100">
                        {% for complaint in complaints %}
                        <tr class="hover:bg-gray-50 transition duration-150">
                            <td class="table-cell font-medium text-dark-gray">
                                {{ complaint.title }}
                            </td>
                            
                            <td class="table-cell text-gray-600 hidden sm:table-cell">
                                {{ complaint.category }}
                            </td>
                            
                            <td class="table-cell text-center">
                                {% if complaint.status == 'Pending' %}
                                    <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800 ring-1 ring-yellow-400">
                                        ‚è≥ Pending
                                    </span>
                                {% elif complaint.status == 'Resolved' %}
                                    <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-green-100 text-green-800 ring-1 ring-primary-green">
                                        ‚úÖ Resolved
                                    </span>
                                {% elif complaint.status == 'Closed' %}
                                    <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-red-100 text-red-800 ring-1 ring-red-400">
                                        üõë Closed
                                    </span>
                                {% else %}
                                    <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-gray-100 text-gray-600 ring-1 ring-gray-300">
                                        {{ complaint.status }}
                                    </span>
                                {% endif %}
                            </td>
                            
                            <td class="table-cell text-gray-500 text-sm hidden lg:table-cell">
                                {{ complaint.updated_at|date:"M d, Y" }}
                            </td>
                            
                            <td class="table-cell">
                                </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    {% else %}
        <div class="max-w-xl mx-auto p-12 bg-white rounded-xl shadow-xl border border-gray-200 mt-10 text-center">
            <svg class="w-16 h-16 mx-auto text-primary-green mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2m-9 0V3a2 2 0 012-2h4a2 2 0 012 2v2m-6 0h6"></path></svg>
            <h2 class="text-xl font-bold text-dark-gray mb-2">You haven't submitted any complaints yet.</h2>
            <p class="text-gray-500 mb-6">Start by registering your first issue and track its progress here.</p>
            <a href="{% url 'register_complaints' %}" class="inline-block bg-primary-green text-white font-semibold px-6 py-3 rounded-lg hover-bg-primary-green transition duration-300 shadow-md">
                Register a New Complaint
            </a>
        </div>
    {% endif %}
</main>
</body>
</html>